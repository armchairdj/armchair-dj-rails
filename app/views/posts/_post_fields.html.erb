<%= content_tag(:div, class: "tabgroup",
  "data-controller":       "tabgroup",
  "data-tabgroup-default": "post-review-choose"
) do %>
  <%= content_tag(:ul, class: "tabs") do %>
    <%= content_tag(:li, "Choose Work", "data-target": "tabgroup.trigger", "data-action": "click->tabgroup#activate", "data-tab-name": "post-review-choose") %>

    <% if @show_new_work %>
      <%= content_tag(:li, "New Work",    "data-target": "tabgroup.trigger", "data-action": "click->tabgroup#activate", "data-tab-name": "post-review-new") %>
    <% end %>

    <%= content_tag(:li, "Standalone",  "data-target": "tabgroup.trigger", "data-action": "click->tabgroup#activate", "data-tab-name": "post-standalone") %>
  <% end %>


  <%= content_tag(:div, class: "tab", "data-target": "tabgroup.tab", "data-tab-name": "post-review-choose") do %>
    <%= content_tag(:fieldset) do %>
      <%= f.input :work_id, as: :grouped_select,
        collection:         Work.grouped_select_options_for_post,
        required:           false,
        group_label_method: :first,
        group_method:       :last,
        label_method:       :display_name_with_creator,
        value_method:       :id,
        include_blank:      true,
        input_html:         {
          "data-controller":                     "selectize-post",
          "data-selectize-post-tab-name":        "post-review-new",
          "data-selectize-post-title-selector":  "#post_work_attributes_title",
          "data-selectize-post-artist-selector": "#post_work_attributes_contributions_attributes_0_creator_id",
        }
      %>
    <% end %>
  <% end %>

  <% if @show_new_work %>
    <%= content_tag(:div, class: "tab", "data-target": "tabgroup.tab", "data-tab-name": "post-review-new") do %>
      <%= content_tag(:fieldset) do %>
        <%= f.simple_fields_for :work do |ff| %>
          <%= render partial: 'works/work_fields', locals: {
            f:        ff,
            creators: creators,
            roles:    roles
          } %>
        <% end %>
      <% end %>
    <% end %>
  <% end %>

  <%= content_tag(:div, class: "tab", "data-target": "tabgroup.tab", "data-tab-name": "post-standalone") do %>
    <%= content_tag(:fieldset) do %>
      <%= f.input :title, required: false %>
    <% end %>
  <% end %>
<% end %>

<%= f.input :body, input_html: { class: "large" } %>
