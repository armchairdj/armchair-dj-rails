<%
  html_opts = { class: "admin" }

  if @post.persisted? && @post.unpublished?
    html_opts = js_autosave_attrs(@post).merge(html_opts)
  end
%>

<%= simple_form_for([:admin, @post], html: html_opts) do |f| %>
  <%= f.error_notification %>

  <%= content_tag(:div, class: "form-inputs") do %>
    <%= content_tag(:section, class: "adj-module") do %>
      <%= content_tag(:fieldset) do %>
        <%= yield f %>

        <% unless @post.new_record? %>
          <%= render "admin/posts/standard_fields", f: f %>
        <% end %>
      <% end %>
    <% end %>

    <% unless @post.new_record? %>
      <%= render "admin/links/has_many_links_fieldset", f: f %>
      <%= render "admin/posts/publication_fieldset",    f: f %>
    <% end %>
  <% end %>

  <%= content_tag(:div, class: "button-group") do %>
    <%= admin_submit_button(f) %>
  <% end %>
<% end %>
