<% tab_name = "post-choose-work" %>

<% content_for(:tab_triggers) do %>
  <%= content_tag(:li) do %>
    <%= link_to("Choose Work", "##{tab_name}", "data-target": "tabbable.trigger", "data-action": "click->tabbable#activate", "data-tab-name": tab_name) %>
  <% end %>
<% end %>

<% content_for(:tabs) do %>
  <%= content_tag(:div, class: "tab", "data-target": "tabbable.tab", "data-tab-name": tab_name, id: tab_name) do %>
    <%= content_tag(:fieldset, class: "chunk") do %>
      <%= content_tag(:legend, "Choose Work", "data-target": "tabbable.remove") %>

      <%= f.input :work_id, as: :grouped_select,
        collection:         works,
        selected:           f.object.current_work_id,
        required:           false,
        group_label_method: :first,
        group_method:       :last,
        label_method:       :full_display_title,
        value_method:       :id,
        include_blank:      :translate,
        input_html:         {
          "data-controller":                              "selectable-prepare-work",
          "data-selectable-prepare-work-tab-name":        "post-new-work",
          "data-selectable-prepare-work-title-selector":  "#post_work_attributes_title",
          "data-selectable-prepare-work-artist-selector": "#post_work_attributes_credits_attributes_0_creator_id"
        }
      %>
    <% end %>
  <% end %>
<% end %>
