<% return unless f.object.persisted? %>

<%= content_tag(:section, class: "adj-module") do %>
  <%= content_tag(:fieldset) do %>
    <%= content_tag(:legend, "Publication Details") %>

    <%= f.input(:slug, disabled: true) %>

    <% unless f.object.draft? %>
      <%= f.input(:clear_slug, as: :boolean) %>
    <% end %>

    <%= f.input(:status, as: :string, disabled: true, required: false, input_html: {
      value: f.object.human_status
    } ) %>

    <% if f.object.published? %>
      <%= f.input :published_at, as: :date, html5: true, disabled: true %>
    <% else %>
      <%= f.input :publish_on,   as: :date, html5: true, hint: true %>
    <% end %>
  <% end %>

  <%= content_tag(:div, class: "button-group") do %>
    <% if f.object.published? %>
      <%= f.button :button, "Unpublish",
        type:           :submit,
        name:           "#{f.object.model_name.param_key}[unpublishing]",
        value:          "1",
        class:          "danger",
        "data-confirm": "Are you sure?"
      %>
    <% else %>
      <%= f.button :button, "Publish",
        type:           :submit,
        name:           "#{f.object.model_name.param_key}[publishing]",
        value:          "1",
        class:          "danger",
        "data-confirm": "Are you sure?"
      %>
    <% end %>

    <% if f.object.scheduled? %>
      <%= f.button :button, "Unschedule",
        type:           :submit,
        name:           "#{f.object.model_name.param_key}[unscheduling]",
        value:          "1",
        class:          "danger",
        "data-confirm": "Are you sure?"
      %>
    <% elsif f.object.draft? %>
      <%= f.button :button, "Schedule",
        type:           :submit,
        name:           "#{f.object.model_name.param_key}[scheduling]",
        value:          "1",
        class:          "danger",
        "data-confirm": "Are you sure?"
      %>
    <% end %>
  <% end %>
<% end %>
