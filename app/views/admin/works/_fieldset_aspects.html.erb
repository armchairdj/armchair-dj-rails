<%
  error   = f.error(:aspects)
  classes = join_attr("fields-for", ("fieldset-with-errors" if error))
%>

<%= content_tag(:section, class: "adj-module") do %>
  <%= content_tag(:fieldset, class: classes) do %>
    <%= content_tag(:legend, "Aspects") %>

    <%= content_tag(:div, error, class: "legend-hint") if error %>

    <% @work.available_facets.each do |facet| %>
      <%= f.input :aspect_ids,
        label:         Aspect.human_enum_value(:facet, facet),
        include_blank: :translate,
        as:            :select,
        collection:    Aspect.for_facet(facet),
        input_html:    js_selectable_create_aspect_attrs(facet)
      %>
    <% end %>
  <% end %>
<% end %>
